# Техническое задание
## Проект: Libbord

## 1. Общая концепция

**Libbord** — аналитическая платформа (дашборд) для библиотек и учреждений науки/образования, предназначенная для сбора, нормализации, хранения и визуализации показателей деятельности из разных источников:
- Яндекс.Метрика (веб-сайты)
- ВКонтакте (социальные сети)
- Мобильные приложения
- Внутренние ИС библиотек
- Внешние источники (опросы, формы, CSV, API)

Цель платформы — дать администрации и командам развития **единое окно аналитики**, позволяющее:
- отслеживать KPI;
- сравнивать периоды и каналы;
- формировать отчёты;
- принимать управленческие решения.

---

## 2. Роли пользователей

### 2.1 Суперадминистратор
- Управление организациями
- Управление пользователями
- Настройка глобальных справочников
- Подключение источников данных

### 2.2 Администратор организации
- Настройка показателей
- Подключение счетчиков и API
- Загрузка данных вручную
- Просмотр аналитики своей организации

### 2.3 Аналитик / Руководитель
- Просмотр дашбордов
- Фильтрация данных
- Экспорт отчетов

### 2.4 Гость (опционально)
- Просмотр публичных дашбордов

---

## 3. Источники данных

### 3.1 Яндекс.Метрика

**Подключение:**
- OAuth-авторизация
- Привязка одного или нескольких счетчиков

**Собираемые показатели (базовый набор):**
- visits
- users
- pageviews
- bounce_rate
- avg_session_duration
- traffic_source
- device_type
- geography (region, city)

**Периодичность обновления:**
- 1 раз в сутки (по умолчанию)
- вручную по запросу

---

### 3.2 ВКонтакте

**Подключение:**
- OAuth VK
- Выбор сообщества

**Показатели:**
- subscribers_total
- subscribers_growth
- reach_total
- reach_organic
- impressions
- likes
- comments
- reposts
- engagement_rate

---

### 3.3 Мобильное приложение

**Способы интеграции:**
- SDK (Firebase / AppMetrica)
- REST API

**Показатели:**
- installs
- active_users (DAU / MAU)
- sessions
- retention_rate
- in_app_events

---

### 3.4 Ручной ввод / CSV / формы

- Загрузка CSV
- Ввод через админ-интерфейс
- Подключение Google Forms / аналогов

Примеры данных:
- офлайн-посещения
- мероприятия
- участники
- опросы удовлетворенности

---

## 4. Нормализация данных

### 4.1 Базовые принципы

- Все показатели приводятся к **единой временной шкале**
- Используется единый справочник показателей
- Все числовые значения хранятся в числовом формате
- Метаданные отделены от значений

---

### 4.2 Унифицированная модель данных

#### Entity: Organization
- id
- name
- type
- region

#### Entity: DataSource
- id
- type (yandex_metrica / vk / mobile / manual)
- credentials
- organization_id

#### Entity: Metric
- id
- code
- name
- description
- unit
- category

#### Entity: MetricValue
- id
- metric_id
- source_id
- date
- value
- dimensions (json)

---

## 5. Админ-интерфейс

### 5.1 Подключение Яндекс.Метрики

Шаги:
1. Кнопка «Подключить Яндекс.Метрику»
2. OAuth-авторизация
3. Список доступных счетчиков
4. Выбор счетчика
5. Подтверждение

В интерфейсе отображается:
- ID счетчика
- Статус подключения
- Дата последней синхронизации

---

### 5.2 Подключение ВКонтакте

Аналогичный сценарий:
- OAuth VK
- Выбор сообщества
- Настройка периодичности

---

### 5.3 Ручной ввод данных

Форма:
- выбор показателя
- период
- значение
- комментарий

---

## 6. Главный экран (Dashboard)

### 6.1 Структура

**Верхняя панель:**
- выбор организации
- период
- экспорт

**Основная зона:**
- KPI-карточки
- графики динамики
- источники трафика
- социальная активность

---

### 6.2 KPI-блок

Примеры:
- Посещения (всего)
- Онлайн + офлайн
- Рост / падение %

---

## 7. Отчеты и экспорт

❌ В рамках MVP и последующих версий функциональность отчетов и экспорта (PDF, Excel, CSV) **не реализуется**.

Libbord рассматривается как:
– оперативный управленческий дашборд;
– инструмент мониторинга и принятия решений;
– визуальный интерфейс для анализа динамики.

Экспорт и формальная отчетность могут быть рассмотрены **только в отдельных, будущих версиях** при отдельном запросе.


---

## 8. Структура дашборда для научной библиотеки Томского государственного университета (ТГУ)

### 8.1. Контекст использования
Дашборд предназначен для научной библиотеки ТГУ как:
– цифрового центра научных знаний;
– инфраструктуры поддержки НИОКР и образовательных программ;
– публичного и управленческого инструмента.

Основные аудитории:
– директор НБ ТГУ;
– руководство университета;
– аналитики и проектные менеджеры;
– сотрудники, отвечающие за цифровые каналы.

---

### 8.2. Главный экран (Overview)

#### Верхняя панель
- Название организации: «Научная библиотека ТГУ»
- Переключатель периода: сегодня / вчера / неделя / месяц / квартал / год
- Переключатель счетчика Яндекс.Метрики

---

### 8.3. Блок 1. Общая цифровая активность библиотеки
**Цель:** дать мгновенное понимание масштаба присутствия библиотеки.

KPI-карточки:
- Просмотры (всего)
- Визиты
- Уникальные посетители
- Активные пользователи (совокупно)

Источник данных:
- Яндекс.Метрика
- Ручной ввод (для нецифровых каналов)

Визуализация:
- крупные числовые показатели
- динамика относительно предыдущего периода (+ / – %)

---

### 8.4. Блок 2. Где библиотеку смотрят и изучают
**Ключевая логика:** не «откуда пришли», а **где происходит взаимодействие**.

Каналы:
- Сайт библиотеки
- Электронная библиотека
- Электронный каталог
- Telegram-канал
- Сообщество ВКонтакте
- Мобильное приложение
- Другие платформы (произвольное название)

Метрики:
- Просмотры
- Визиты (если применимо)
- Пользователи

Визуализация:
- столбчатая диаграмма по каналам
- тренд по времени

Инсайт:
- какой канал сейчас наиболее «прокачан»
- куда целесообразно направлять контент и ресурсы

---

### 8.5. Блок 3. Поведение пользователей

Метрики (из Яндекс.Метрики):
- Среднее время на ресурсе
- Глубина просмотра
- Доля возвратов
- Показатель отказов

Визуализация:
- линия изменения среднего времени
- индикаторы роста / падения отказов

Аналитические пометки (авто):
- возможные проблемы UX
- резкие изменения поведения
- аномалии (скачки отказов, падение времени)

---

### 8.6. Блок 4. Вовлеченность и обратная связь

Источники:
- Telegram (ручной ввод)
- ВКонтакте (ручной ввод)
- Отзывы (Яндекс.Карты, Google Maps, 2ГИС) — ручной ввод

Метрики:
- Лайки
- Репосты
- Комментарии
- Отзывы (количество)

Дополнительно:
- текстовые заметки администратора
- пометки о контенте с высокой вовлеченностью

Визуализация:
- сравнительные диаграммы
- список последних отзывов

---

### 8.7. Принципы визуального представления
- акцент на динамике, а не на «голых цифрах»
- минимализм
- единая цветовая логика каналов
- возможность быстрого сканирования экрана

---

### 8.8. Масштабирование
Структура дашборда позволяет:
- добавлять другие библиотеки ТГУ;
- сравнивать подразделения;
- использовать Libbord на уровне всего университета.

---

## 9. Структура данных (MVP, финальная)

### 9.1. Базовые сущности

#### Library
- id
- name (например: «Научная библиотека ТГУ»)
- description
- created_at

#### MetricCounter (Яндекс.Метрика)
- id
- library_id
- name (человекочитаемое название)
- yandex_counter_id
- is_active

---

### 9.2. Каналы присутствия (где библиотеку изучают)

#### Channel
- id
- library_id
- type (enum: website, e-library, catalog, telegram, vk, mobile_app, other)
- custom_name (если type = other)
- is_manual (boolean)

---

### 9.3. Автоматические метрики (Яндекс.Метрика)

#### TrafficMetric
- id
- library_id
- channel_id
- date
- views
- visits
- users
- avg_time
- depth
- bounce_rate
- return_rate

Источник:
- автоматическая загрузка из Яндекс.Метрики

---

### 9.4. Ручные метрики активности

#### EngagementMetric
- id
- library_id
- channel_id
- date
- likes
- reposts
- comments
- notes (текстовые пометки администратора)

Источник:
- ручной ввод администратором

---

### 9.5. Отзывы и обратная связь

#### Review
- id
- library_id
- platform (Yandex Maps, Google Maps, 2GIS, другое)
- date
- rating (если есть)
- text
- sentiment (manual: positive / neutral / negative)

---

## 10. Логика аналитических подсказок (Insights Engine)

Подсказки отображаются **под соответствующими чартами**.

Примеры правил:
- Bounce rate > 20% → «Высокий показатель отказов. Возможно, проблемы с контентом или навигацией.»
- Резкое падение среднего времени (>15%) → «Пользователи стали меньше взаимодействовать с ресурсом.»
- Рост просмотров без роста вовлеченности → «Рост охвата без вовлечения — проверьте формат контента.»

Подсказки:
- генерируются автоматически
- не являются рекомендациями, а сигналами внимания

---

## 11. Главный экран дашборда (одна страница)

### 11.1. Общая структура

1. Header
   - Название: Libbord
   - Подзаголовок: «Научная библиотека ТГУ»
   - Переключатель периода
   - Переключатель счетчика Метрики

2. Блок «Общая цифровая активность»
   - KPI-карточки
   - Tooltip с пояснением метрик

3. Блок «Где библиотеку изучают»
   - Столбчатая диаграмма по каналам
   - Hover-подсказки
   - Авто-инсайт под графиком

4. Блок «Поведение пользователей»
   - Линейные графики
   - Индикаторы изменений
   - Диагностические подсказки

5. Блок «Вовлеченность и обратная связь»
   - Диаграммы лайков / комментариев
   - Список последних отзывов
   - Текстовые пометки

---

## 12. Административный интерфейс

### 12.1. Доступ
- Авторизация только для администратора
- Просмотр дашборда — без авторизации

### 12.2. Функции администратора

1. Подключение счетчиков Яндекс.Метрики
   - ввод ID счетчика
   - присвоение библиотеке
   - активация / деактивация

2. Управление каналами
   - добавление канала
   - выбор типа
   - указание произвольного названия

3. Ввод ручных метрик
   - форма ввода
   - выбор канала
   - выбор даты
   - валидация данных

4. Ввод отзывов
   - платформа
   - текст
   - тональность

---

## 13. Технические принципы

- нормализованные данные
- единый формат дат
- агрегирование на сервере
- кэширование запросов Метрики
- готовность к AI-кодингу (Cursor / Cloud Code)

